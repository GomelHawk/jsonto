<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Convert JSON to {{ route.upper() if route else '...'|uppercase }}</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Prism.js CSS from jsDelivr -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css">

    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='json.svg') }}" type="image/svg+xml">

    <meta name="google-site-verification" content="-v9iYsHoDaoAXFX1V45niZxw0FfPUBj-NhYhtpuCQoI"/>
    <meta name="yandex-verification" content="23158a1a3f0df293"/>
</head>
<body>

<!-- Navigation Bar -->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="/" title="Convert JSON to ...">
            <img src="{{ url_for('static', filename='json.svg') }}" class="json-logo" alt="Convert JSON to ...">
            <strong>{ JSON }</strong> to ...
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link {% if route == 'php' %} active {% endif %}" href="/php">PHP</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {% if route == 'java' %} active {% endif %}" href="/java">JAVA</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link {% if route == 'python' %} active {% endif %}" href="/python">PYTHON</a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<div class="navbar-bottom">
    {% for i in range(12) %}&nbsp; CONVERT JSON TO {{ route.upper() }} MODELS &nbsp;â€¢{% endfor %}
</div>

<!-- Main Content -->
<div class="container textarea-container main-container">
    <form method="post">
        <div class="row">
            <div class="col-md-6 text-start">

                <!-- JSON textarea -->
                <h5>Full JSON:</h5>
                <textarea name="json_full" rows="6"
                          placeholder="Enter JSON here...">{{ request.form["json_full"] }}</textarea>
                <h5>Minimized JSON:</h5>
                <textarea name="json_min" rows="3"
                          placeholder="Optional, to detect nullable fields only">{{ request.form["json_min"] }}</textarea>

                <div class="row">
                    <div class="col-md-8">
                        <div class="checkbox-group">

                            <!-- Processing options (checkboxes) -->
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="enabled"
                                       {% if request.form.get("common_with_prefixes", None) == "enabled" %}
                                checked
                                {% endif %}
                                name="common_with_prefixes" id="common_with_prefixes">
                                <input type="hidden" name="common_with_prefixes" value="disabled"/>
                                <label class="form-check-label" for="common_with_prefixes">
                                    Add the parent model name as a prefix to the submodel name
                                </label>
                            </div>
                            {% if route == 'php' %}
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="enabled"
                                       {% if request.form.get("php_jms_annotation", 'enabled') == "enabled" %}
                                checked
                                {% endif %}
                                name="php_jms_annotation" id="php_jms_annotation">
                                <input type="hidden" name="php_jms_annotation" value="disabled"/>
                                <label class="form-check-label" for="php_jms_annotation">
                                    Add JMS Serializer Annotation
                                </label>
                            </div>
                            {% endif %}
                            {% if route == 'java' %}
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="enabled"
                                       {% if request.form.get("java_use_properties", None) == "enabled" %}
                                checked
                                {% endif %}
                                name="java_use_properties" id="java_use_properties">
                                <input type="hidden" name="java_use_properties" value="disabled"/>
                                <label class="form-check-label" for="java_use_properties">
                                    Use properties (setters and getters)
                                </label>
                            </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Preview button -->
                    <div class="col-md-4 text-end">
                        <div class="center-button">
                            <button class="btn btn-primary" name="action" value="preview" type="submit">Preview
                            </button>
                        </div>
                    </div>
                    <div class="col-md-12 mt-4 mb-4">
                        <hr/>
                    </div>

                    <!-- Code examples -->
                    <div class="col-md-12">
                        <h5>How to use models</h5>

                        <!-- PHP example -->
                        {% if route == 'php' %}
                        <pre><code class="language-php">{{
"<?php declare(strict_types=1);

use App\\Model\\RootModel;

$serializer = JMS\\Serializer\\SerializerBuilder::create()->build();
$object = $serializer->deserialize($json, RootModel::class, 'json');
"|escape
                        }}</code></pre>
                        {% endif %}

                        <!-- Java example -->
                        {% if route == 'java' %}
                        <pre><code class="language-java">{{
"import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.annotation.JsonProperty;

ObjectMapper om = new ObjectMapper();
RootModel root = om.readValue(json, RootModel.class);
"|escape
                        }}</code></pre>
                        {% endif %}

                        <!-- Python example -->
                        {% if route == 'python' %}
                        <pre><code class="language-python">{{
"import json

json_dict = json.loads(json)
root = RootModel.from_dict(json_dict)
"|escape
                        }}</code></pre>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="col-md-6 text-start">
                <div class="row">

                    <!-- Language icon -->
                    <div class="col-12 text-end mb-4">
                        <img src="{{ url_for('static', filename=route+'.svg') }}" class="language-logo"
                             alt="{{ route }}"/>
                    </div>
                </div>

                <!-- Error messages if any -->
                {% if error %}
                <div class="alert alert-danger" role="alert">{{ error }}</div>
                {% else %}

                <!-- Copy/download buttons -->
                {% if classes|length %}
                <div class="center-button text-end">
                    {% if route == 'python' %}
                    <button class="btn btn-primary"
                            onclick="navigator.clipboard.writeText(document.getElementById('python-classes').innerText);return false;">
                        Copy code
                    </button>
                    &nbsp;
                    {% endif %}
                    <button class="btn btn-primary" name="action" value="download" type="submit">Download models
                    </button>
                </div>
                {% endif %}

                <!-- Classes preview -->
                {% for key, value in classes.items() %}
                <h5>
                    {% if route == 'php' %}App\Model\{% endif %}{{ key }}
                </h5>
                <pre><code class="language-{{ route }}" {% if route== 'python' %}id="python-classes"{% endif %}>{{ value|escape }}</code></pre>
                {% endfor %}
                {% endif %}
            </div>
        </div>
    </form>
</div>

<!-- Footer (Copyright Section) -->
<footer>
    <div class="container">
        <p>
            &copy; 2024 &nbsp; <a href="https://koshelenko.info">Dmitry Koshelenko</a> &nbsp; &bull; &nbsp;
            <a href="https://github.com/GomelHawk/jsonto">GitHub</a>
        </p>
    </div>
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Prism.js JS from jsDelivr -->
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

</body>
</html>
